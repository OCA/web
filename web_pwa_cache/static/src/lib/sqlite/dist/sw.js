self.sqliteWorker=function(e){"use strict";const t=new WeakMap,n=(e,...n)=>{const{t:r,v:s}=((e,t)=>{const n=[e[0]],r=[];for(let s=0,c=0,l=0,{length:a}=t;c<a;c++)t[c]instanceof o?n[s]+=t[c].v+e[c+1]:(r[l++]=c,n[++s]=e[c+1]);return{t:n,v:r}})(e,n),c=t.get(e)||t.set(e,{}).get(e);return(c[r]||(c[r]=[r])).concat(s.map((e=>n[e])))};function o(e){this.v=e}const r=(e,t)=>(o,...r)=>new Promise(((c,a)=>{o.some(l)&&a(s(new Error("SQLITE_ERROR: SQL injection hazard")));const[i,...u]=n(o,...r);e[t](i.join("?"),u,((e,t)=>{e?a(e):c(t)}))})),s=e=>(e.code="SQLITE_ERROR",e),c=(e,...t)=>new o(function(e){for(var t=e[0],n=1,o=arguments.length;n<o;n++)t+=arguments[n]+e[n];return t}(e,...t)),l=e=>e.includes("?");function a(e){return{all:r(e,"all"),get:r(e,"get"),query:r(e,"run"),raw:c}}const{assign:i}=Object,u="function"==typeof importScripts,d=t=>new Promise(((n,o)=>{const r=()=>{const e=self.module.exports;delete self.exports,self.module=void 0,n(e)};if(self.exports={},self.module={exports:e},u)importScripts(t),r();else{const{head:e}=document;i(e.appendChild(document.createElement("script")),{onload(){e.removeChild(this),r()},onerror:o,src:t})}})),m="sqlite",f="buffer",p=(e,t=1)=>new Promise(((n,o)=>{i(indexedDB.open(e,t),{onupgradeneeded({target:{result:e,transaction:t}}){e.objectStoreNames.contains(m)||e.createObjectStore(m).createIndex(f,f,{unique:!0}),i(t,{oncomplete(){n(e)}})},onsuccess({target:{result:e}}){n(e)},onerror:o})}));function h({columns:e,values:t}){for(let{length:n}=t,o=0;o<n;o++){const n=t[o],r={};for(let{length:t}=e,o=0;o<t;o++)r[e[o]]=n[o];this.push(r)}}return(e={})=>new Promise(((t,n)=>{const o=e.dist||".";d(o+"/sql-wasm.js").then((({default:r})=>{Promise.all([p(e.name||"sqlite-worker"),r({locateFile:e=>o+"/"+e})]).then((([o,{Database:r}])=>{const s=e=>o.transaction([m],e).objectStore(m);i(s("readonly").get(f),{onsuccess(){let n=Promise.resolve();const{result:o}=this,c=new r(o||e.database||new Uint8Array(0)),l=()=>{n=n.then((()=>new Promise(((t,n)=>{const o=c.export();i(s("readwrite").put(o,f).transaction,{oncomplete(){t(),e.update&&e.update(o)},onabort:n,onerror:n})}))))};o||l();const{all:u,get:d,query:m,raw:p}=a({all(e,t,n){try{const o=c.exec(e,t),r=[];o.forEach(h,r),n(null,r)}catch(e){n(e)}},get(e,t,n){try{const o=c.exec(e+" LIMIT 1",t),r=[];o.forEach(h,r),n(null,r.shift()||null)}catch(e){n(e)}},run(e,t,n){try{n(null,c.run(e,t))}catch(e){n(e)}}});let g=0;t({all:u,get:d,raw:p,query(t){return/\b(?:INSERT|DELETE|UPDATE)\b/i.test(t[0])&&(clearTimeout(g),g=setTimeout(l,e.timeout||250)),m.apply(this,arguments)}})},onerror:n})}),n)}))}))}({});
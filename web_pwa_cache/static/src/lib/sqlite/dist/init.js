const e=new WeakMap,t=(t,...o)=>{const{t:r,v:s}=((e,t)=>{const o=[e[0]],r=[];for(let s=0,c=0,l=0,{length:a}=t;c<a;c++)t[c]instanceof n?o[s]+=t[c].v+e[c+1]:(r[l++]=c,o[++s]=e[c+1]);return{t:o,v:r}})(t,o),c=e.get(t)||e.set(t,{}).get(t);return(c[r]||(c[r]=[r])).concat(s.map((e=>o[e])))};function n(e){this.v=e}const o=(e,n)=>(o,...s)=>new Promise(((l,a)=>{o.some(c)&&a(r(new Error("SQLITE_ERROR: SQL injection hazard")));const[i,...u]=t(o,...s);e[n](i.join("?"),u,((e,t)=>{e?a(e):l(t)}))})),r=e=>(e.code="SQLITE_ERROR",e),s=(e,...t)=>new n(function(e){for(var t=e[0],n=1,o=arguments.length;n<o;n++)t+=arguments[n]+e[n];return t}(e,...t)),c=e=>e.includes("?");function l(e){return{all:o(e,"all"),get:o(e,"get"),query:o(e,"run"),raw:s}}const{assign:a}=Object,i="function"==typeof importScripts,u=e=>new Promise(((t,n)=>{const o=()=>{const e=self.module.exports;delete self.exports,self.module=void 0,t(e)};if(self.exports={},self.module={exports:exports},i)importScripts(e),o();else{const{head:t}=document;a(t.appendChild(document.createElement("script")),{onload(){t.removeChild(this),o()},onerror:n,src:e})}})),f=(e,t=1)=>new Promise(((n,o)=>{a(indexedDB.open(e,t),{onupgradeneeded({target:{result:e,transaction:t}}){e.objectStoreNames.contains("sqlite")||e.createObjectStore("sqlite").createIndex("buffer","buffer",{unique:!0}),a(t,{oncomplete(){n(e)}})},onsuccess({target:{result:e}}){n(e)},onerror:o})}));function d({columns:e,values:t}){for(let{length:n}=t,o=0;o<n;o++){const n=t[o],r={};for(let{length:t}=e,o=0;o<t;o++)r[e[o]]=n[o];this.push(r)}}exports.init=(e={})=>new Promise(((t,n)=>{const o=e.dist||".";u(o+"/sql-wasm.js").then((({default:r})=>{Promise.all([f(e.name||"sqlite-worker"),r({locateFile:e=>o+"/"+e})]).then((([o,{Database:r}])=>{const s=e=>o.transaction(["sqlite"],e).objectStore("sqlite");a(s("readonly").get("buffer"),{onsuccess(){let n=Promise.resolve();const{result:o}=this,c=new r(o||e.database||new Uint8Array(0)),i=()=>{n=n.then((()=>new Promise(((t,n)=>{const o=c.export();a(s("readwrite").put(o,"buffer").transaction,{oncomplete(){t(),e.update&&e.update(o)},onabort:n,onerror:n})}))))};o||i();const{all:u,get:f,query:m,raw:p}=l({all(e,t,n){try{const o=c.exec(e,t),r=[];o.forEach(d,r),n(null,r)}catch(e){n(e)}},get(e,t,n){try{const o=c.exec(e+" LIMIT 1",t),r=[];o.forEach(d,r),n(null,r.shift()||null)}catch(e){n(e)}},run(e,t,n){try{n(null,c.run(e,t))}catch(e){n(e)}}});let h=0;t({all:u,get:f,raw:p,query(t){return/\b(?:INSERT|DELETE|UPDATE)\b/i.test(t[0])&&(clearTimeout(h),h=setTimeout(i,e.timeout||250)),m.apply(this,arguments)}})},onerror:n})}),n)}))}));
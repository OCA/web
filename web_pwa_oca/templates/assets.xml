<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template
        id="web_layout_pwa"
        name="Web layout PWA"
        inherit_id="web.webclient_bootstrap"
    >
        <xpath expr="//t[@t-call-assets='web.assets_common']" position="before">
            <!-- Add link rel manifest -->
            <link rel="manifest" t-attf-href="/web_pwa_oca/manifest.webmanifest" />
            <!-- Add iOS meta tags and icons -->
            <meta name="apple-mobile-web-app-capable" content="yes" />
            <meta name="apple-mobile-web-app-status-bar-style" content="black" />
            <t
                t-set="pwa_name"
                t-value="request.env['ir.config_parameter'].sudo().get_param('pwa.manifest.name')"
            />
            <t t-if="pwa_custom_icon">
                <!-- This icon must be 180x180 -->
                <link rel="apple-touch-icon" href="/web_pwa_oca/icon192x192.png" />
                <link
                    rel="apple-touch-icon"
                    sizes="512x512"
                    href="/web_pwa_oca/icon512x512.png"
                />
            </t>
            <t t-else="">
                <!-- This icon must be 180x180 -->
                <link
                    rel="apple-touch-icon"
                    href="/web_pwa_oca/static/img/icons/icon-192x192.png"
                />
                <link
                    rel="apple-touch-icon"
                    sizes="512x512"
                    href="/web_pwa_oca/static/img/icons/icon-512x512.png"
                />
            </t>
            <meta name="apple-mobile-web-app-title" t-att-content="pwa_name" />
            <t
                t-set="pwa_custom_icon"
                t-value="request.env['ir.config_parameter'].sudo().get_param('pwa.manifest.custom_icon')"
            />
            <!-- Add meta theme-color -->
            <t
                t-set="pwa_theme_color"
                t-value="request.env['ir.config_parameter'].sudo().get_param('pwa.manifest.theme_color')"
            />
            <meta name="theme-color" t-att-content="pwa_theme_color" />
        </xpath>
    </template>
    <template
        id="assets_backend"
        name="web service worker assets"
        inherit_id="web.assets_backend"
    >
        <xpath expr="." position="inside">
            <link rel="stylesheet" href="/web_pwa_oca/static/src/scss/main.scss" />

            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/pwa_manager.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/webclient.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/app_menus.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/action_manager_act_window.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/abstract_view.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/basic_view.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/basic_renderer.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/form_renderer.js"
            />
            <script
                type="text/javascript"
                src="/web_pwa_oca/static/src/js/views/data_manager.js"
            />
        </xpath>
    </template>
</odoo>
